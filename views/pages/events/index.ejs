<!-- Страница событий -->
<div class="events-page">
    <!-- Фильтры -->
    <div class="filters-section bg-light py-4 mb-4">
        <div class="container">
            <form class="row g-3" method="GET">
                <div class="col-md-4">
                    <label for="category" class="form-label">Категория</label>
                    <select class="form-select" id="category" name="category">
                        <option value="">Все категории</option>
                        <option value="concert" <%= filters?.category === 'concert' ? 'selected' : '' %>>Концерты</option>
                        <option value="exhibition" <%= filters?.category === 'exhibition' ? 'selected' : '' %>>Выставки</option>
                        <option value="kids" <%= filters?.category === 'kids' ? 'selected' : '' %>>Детские</option>
                        <option value="sport" <%= filters?.category === 'sport' ? 'selected' : '' %>>Спортивные</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="date" class="form-label">Дата</label>
                    <input type="date" class="form-control" id="date" name="date" value="<%= filters?.date || '' %>">
                </div>
                <div class="col-md-4 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">Применить фильтры</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Список событий -->
    <div class="events-list">
        <div class="container">
            <% if (events.length > 0) { %>
                <div class="row">
                    <% events.forEach(event => { %>
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="event-card">
                                <div class="event-image">
                                    <img src="<%= event.image || '/images/event-placeholder.jpg' %>" alt="<%= event.title %>">
                                    <div class="event-overlay">
                                        <span class="event-date">
                                            <%= moment(event.date).format('D MMMM') %>
                                        </span>
                                        <span class="event-time">
                                            <%= moment(event.time, 'HH:mm:ss').format('HH:mm') %>
                                        </span>
                                    </div>
                                </div>
                                <div class="event-info">
                                    <h3 class="event-title"><%= event.title %></h3>
                                    <p class="event-description"><%= event.description %></p>
                                    <div class="event-meta">
                                        <span class="event-price">
                                            <% if (event.price > 0) { %>
                                                <%= event.price %> ₽
                                            <% } else { %>
                                                Бесплатно
                                            <% } %>
                                        </span>
                                        <a href="/events/<%= event.id %>" class="btn btn-outline-primary btn-sm">Подробнее</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                </div>
            <% } else { %>
                <div class="text-center py-5">
                    <h3>События не найдены</h3>
                    <p>Попробуйте изменить параметры поиска</p>
                </div>
            <% } %>
        </div>
    </div>
</div>

<style>
.event-card {
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.event-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.event-image {
    position: relative;
    height: 200px;
}

.event-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.event-overlay {
    position: absolute;
    top: 1rem;
    right: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.event-date,
.event-time {
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
}

.event-info {
    padding: 1.5rem;
}

.event-title {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
}

.event-description {
    color: var(--secondary-color);
    margin-bottom: 1rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.event-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.event-price {
    font-weight: 500;
    color: var(--primary-color);
}
</style> 